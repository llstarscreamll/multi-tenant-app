<app-sidebar-layout>
  <app-page-header>
    <div class="col-xs-12">
      <h1>
        {{ 'TENANT.module-name-plural' | translate }}
        <small> / {{ 'TENANT.'+formType | translate }}</small>
      </h1>
    </div>
  </app-page-header>

  <app-page-content>
    <app-box>
      <app-box-body>

        <app-alerts [appMessage]="appMessages$ | async"></app-alerts>
          
          <form
            *ngIf="formConfigured"
            [formGroup]="tenantForm"
            (ngSubmit)="submitTenantForm()">

            <tenant-form-fields-component *ngIf="formConfigured"
              [tenantForm]="tenantForm"
              [tenantFormModel]="tenantFormModel$ | async"
              [tenantFormData]="tenantFormData$ | async"
              [errors]="errors$ | async"
              [formType]="formType">
            </tenant-form-fields-component>

            <div class="form-group">
              <button *ngIf="formType == 'create'"
                  class="btn create-row"
                  type="submit"
                  [disabled]="!tenantForm.valid"
                  [ngClass]="{'btn-primary': tenantForm.valid, 'btn-default': !tenantForm.valid}">
                <i class="glyphicon glyphicon-floppy-disk"></i>
                <span class="btn-label" translate>TENANT.create</span>
              </button>

              <button *ngIf="(formType == 'edit' || formType == 'details') && !(selectedTenant$ | async)?.deleted_at"
                  class="btn edit-row"
                  type="submit"
                  [disabled]="!tenantForm.valid"
                  [ngClass]="{'btn-warning': tenantForm.valid, 'btn-default': !tenantForm.valid}">
                <i class="glyphicon glyphicon-pencil"></i>
                <span class="btn-label" translate>TENANT.edit</span>
              </button>

              <button *ngIf="(formType == 'edit' || formType == 'details') && !(selectedTenant$ | async)?.deleted_at"
                  [disabled]="tenantForm.get('id') && tenantForm.get('id').value == ''"
                  (click)="deleteRow(id)"
                  type="button"
                  class="btn btn-default delete-row">
                <i class="glyphicon glyphicon-trash"></i>
                <span class="btn-label" translate>TENANT.delete</span>
              </button>

              <a  class="btn btn-default show-all-rows" 
                [routerLink]="['/tenant']">
                <i class="glyphicon glyphicon-th-list"></i>
                <span class="btn-label" translate>TENANT.see_all</span>
              </a>
            </div>

            <div class="clearfix"></div>

          </form>

      </app-box-body>
    </app-box>
  </app-page-content>

</app-sidebar-layout>