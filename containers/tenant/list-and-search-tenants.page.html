<app-sidebar-layout>
	<app-page-header>
		<div class="col-xs-12">
			<h1 translate>{{ translateKey + 'module-name-plural' }}</h1>
		</div>
	</app-page-header>
	
	<app-page-content>
		<app-box>
			<app-box-body>

				<app-alerts [appMessage]="appMessages$ | async"></app-alerts>
				
				<div class="row">
					<!-- buttons -->
					<div class="col-sm-6 col-md-8 m-b-md">
						<a [routerLink]="[ '/tenant/create' ]" class="btn btn-primary">
							<i class="glyphicon glyphicon-plus"></i>
							<span translate>{{ translateKey + 'create' }}</span>
						</a>
					</div>

					<!-- basic search -->
					<div class="col-sm-6 col-md-4 m-b-md">
						<tenant-search-basic-component (search)="onSearch($event)" (filterBtnClick)="showSearchOptions = !showSearchOptions"></tenant-search-basic-component>
					</div>

					<!-- search options modal -->
					<div *ngIf="showSearchOptions && formConfigured"
						bsModal
						#staticModal="bs-modal"
						[config]="{ show: true }"
						(onHidden)="showSearchOptions = !showSearchOptions"
						class="modal fade"
						tabindex="-1"
						role="dialog"
						aria-hidden="true">
					  <div class="modal-dialog modal-lg">
					    <div class="modal-content">
					      
					      <div class="modal-header">
					        <h4 class="modal-title pull-left" translate>{{ translateKey + 'advanced_search.title' }}</h4>
					        <button type="button" class="close pull-right" aria-label="Close" (click)="staticModal.hide()">
					          <span aria-hidden="true">&times;</span>
					        </button>
					      </div>
					      
					      <div class="modal-body">
					        <tenant-search-advanced-component
					        	class="advanced-search-form"
					        	(search)="onAdvancedSearch($event); staticModal.hide();"
					        	[formModel]="advancedSearchFormModel"
					        	[formData]="tenantFormData$ | async"
					        	[form]="advancedSearchForm"
					        	[errors]="errors$ | async"
					        	[debug]="false">
					        </tenant-search-advanced-component>
					      </div>

					    </div>
					  </div>
					</div>
				</div>

				<tenants-table-component
					(updateSearch)="onSearch($event)"
					[tenants]="(tenantsPagination$ | async)?.data"
					[pagination]="(tenantsPagination$ | async)?.pagination"
					[orderBy]="searchQuery.orderBy"
					[sortedBy]="searchQuery.sortedBy"
					[columns]="searchQuery.filter"
					(deleteBtnClicked)="deleteRow($event)">
				</tenants-table-component>
			</app-box-body>
		</app-box>
	</app-page-content>
</app-sidebar-layout>